<!doctype html>
<html>
<head>
<style>
  .tracks {
    border: 1px solid green;
    height: 300px;
    overflow: scroll;
  }

  .track {
    height: 30px;
    background-color: gray;
  }
</style>  

<script src="http://inc.the.tl/jquery.js"></script>
<script src="http://inc.the.tl/jqueryui.js"></script>
<script src="http://inc.the.tl/underscore.js"></script>
<script src="http://inc.the.tl/coffeescript.js"></script>
<script src="http://inc.the.tl/neckbrace/index.js"></script>
<script type="text/coffeescript">
TrackMaker = (trackManager) ->
  Track = _p.class
    initialize: (o) ->
      el = _m(o).el = $ document.createElement "div"
      el.addClass "track"
      _p.append o    
    append: (o) ->
      _.add
      _m(trackManager).el.append _m(o).el

#simple array with adding and removing
Arr = window.Arr = _p.class
  initialize: (o) ->
    _m(o)._byCid = {}
  add: (o, item) ->
    o.push item
    _m(o)._byCid[item.__cid] = item
  remove: (o, item) ->
    if not (item.__cid of o._byCid)
      return false
    for member, key in o
      if member.__cid == item.__cid
        o.splice key, 1

TrackManager = _p.class
  initialize: (o) ->
    el = _m(o).el = $ document.createElement "div"
    el.addClass "tracks"
    o.tracks = []
    _p.append o
    _m(o).Track = TrackMaker o
    console.log o.audio
  append: (o) ->
    $(document.body).append _m(o).el
  render: (o) ->
    #todo: add this method
  removeTrack: (o, track) ->
  addTrack: (o, track) ->

$(document).ready () ->
  #trackManager = window.trackManager = _p.new TrackManager, audio: $('#song')
  #track1 = _p.new _m(trackManager).Track
   



</script>
</head>
<body>
  <audio id="song" controls="true" src="Yo.mp3"></audio>

</body>
</html>
